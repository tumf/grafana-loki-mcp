---
description: FastMCP ã®åŸºç¤çŸ¥è­˜
globs: 
alwaysApply: false
---
## FastMCPã¨ã¯

FastMCPã¯ã€Model Context Protocol (MCP) ã‚µãƒ¼ãƒãƒ¼ã‚’ç°¡å˜ã«æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®Pythonãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚Pythonã®é–¢æ•°ã‚’ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã§è£…é£¾ã™ã‚‹ã ã‘ã§ã€MCPã‚µãƒ¼ãƒãƒ¼ã‚’ç´ æ—©ãæ§‹ç¯‰ã§ãã¾ã™ã€‚

> ğŸ‰ FastMCPã¯ç¾åœ¨ã€å…¬å¼ã®MCP SDKã«çµ±åˆã•ã‚Œã¦ã„ã¾ã™ï¼
> å…¬å¼ã®Model Context Protocol Python SDK: [github.com/modelcontextprotocol/python-sdk](mdc:https:/github.com/modelcontextprotocol/python-sdk)

## ä¸»ãªç‰¹å¾´

- **é«˜é€Ÿ**: é«˜ãƒ¬ãƒ™ãƒ«ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ã‚ˆã‚Šã€å°‘ãªã„ã‚³ãƒ¼ãƒ‰ã§è¿…é€Ÿãªé–‹ç™ºãŒå¯èƒ½
- **ã‚·ãƒ³ãƒ—ãƒ«**: æœ€å°é™ã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã§MCPã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰
- **Pythonic**: Pythoné–‹ç™ºè€…ã«ã¨ã£ã¦è‡ªç„¶ãªæ„Ÿè¦šã§ä½¿ç”¨å¯èƒ½
- **å®Œå…¨**: MCPã®ä»•æ§˜ã‚’å®Œå…¨ã«å®Ÿè£…ã™ã‚‹ã“ã¨ã‚’ç›®æŒ‡ã—ã¦ã„ã‚‹

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

FastMCPã¯ `uv` ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ï¼š

```bash
uv pip install fastmcp
```

macOSã§ã¯ã€Claude Desktopã‚¢ãƒ—ãƒªã§åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã€Homebrewã‚’ä½¿ã£ã¦ `uv` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼š

```bash
brew install uv
```

ã‚ã‚‹ã„ã¯ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã›ãšã«SDKã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€pipã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```bash
pip install fastmcp
```

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

ä»¥ä¸‹ã¯ã€ç°¡å˜ãªè¨ˆç®—ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã™ã‚‹MCPã‚µãƒ¼ãƒãƒ¼ã®ä¾‹ã§ã™ï¼š

```python
# server.py
from fastmcp import FastMCP

# MCPã‚µãƒ¼ãƒãƒ¼ã®ä½œæˆ
mcp = FastMCP("Demo")

# è¶³ã—ç®—ãƒ„ãƒ¼ãƒ«ã®è¿½åŠ 
@mcp.tool()
def add(a: int, b: int) -> int:
    """äºŒã¤ã®æ•°å€¤ã‚’è¶³ã—ç®—ã™ã‚‹"""
    return a + b

# ã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡Œ
if __name__ == "__main__":
    mcp.run()
```

ã“ã‚Œã ã‘ã§ã€å‹•ä½œã™ã‚‹MCPã‚µãƒ¼ãƒãƒ¼ãŒå®Œæˆã—ã¾ã™ï¼

## ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

FastMCPã¯ä»¥ä¸‹ã®ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼š

### 1. ã‚µãƒ¼ãƒãƒ¼

ã‚µãƒ¼ãƒãƒ¼ã¯FastMCPã®ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã€ã™ã¹ã¦ã®æ©Ÿèƒ½ã®ä¸­å¿ƒã¨ãªã‚Šã¾ã™ï¼š

```python
from fastmcp import FastMCP

mcp = FastMCP(
    "ã‚µãƒ¼ãƒãƒ¼å",
    host="0.0.0.0",  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    port=52229,      # ã‚ªãƒ—ã‚·ãƒ§ãƒ³
)
```

### 2. ãƒ„ãƒ¼ãƒ«

ãƒ„ãƒ¼ãƒ«ã¯LLMãŒå‘¼ã³å‡ºã›ã‚‹é–¢æ•°ã§ã™ã€‚ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦ç°¡å˜ã«å®šç¾©ã§ãã¾ã™ï¼š

```python
@mcp.tool()
def my_tool(param1: str, param2: int) -> str:
    """
    ãƒ„ãƒ¼ãƒ«ã®èª¬æ˜
    
    Args:
        param1: æœ€åˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜
        param2: 2ç•ªç›®ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®èª¬æ˜
        
    Returns:
        çµæœã®èª¬æ˜
    """
    # ãƒ„ãƒ¼ãƒ«ã®å®Ÿè£…
    return f"çµæœ: {param1}, {param2}"
```

### 3. ãƒªã‚½ãƒ¼ã‚¹

ãƒªã‚½ãƒ¼ã‚¹ã¯LLMãŒã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã§ã™ï¼š

```python
@mcp.resource("echo://{message}")
def echo_resource(message: str) -> str:
    """ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚³ãƒ¼ã™ã‚‹"""
    return f"Resource echo: {message}"
```

### 4. ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯LLMã«ç‰¹å®šã®ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã•ã›ã‚‹ãŸã‚ã®æŒ‡ç¤ºã§ã™ï¼š

```python
@mcp.prompt()
def analyze_table(table: str) -> str:
    """ãƒ†ãƒ¼ãƒ–ãƒ«åˆ†æç”¨ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹"""
    return f"""ã“ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’åˆ†æã—ã¦ãã ã•ã„:
ãƒ†ãƒ¼ãƒ–ãƒ«: {table}
ã‚¹ã‚­ãƒ¼ãƒ: 
{get_schema()}

æ§‹é€ ã¨é–¢ä¿‚æ€§ã«ã¤ã„ã¦ã©ã®ã‚ˆã†ãªæ´å¯Ÿã‚’æä¾›ã§ãã¾ã™ã‹ï¼Ÿ"""
```

## ã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡Œæ–¹æ³•

FastMCPã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€ã„ãã¤ã‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ï¼š

### 1. é–‹ç™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰

é–‹ç™ºã¨ãƒ†ã‚¹ãƒˆç”¨ã«ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bash
fastmcp dev server.py
```

### 2. Claude Desktopçµ±åˆï¼ˆé€šå¸¸ä½¿ç”¨ï¼‰

Claude Desktopã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«ã‚µãƒ¼ãƒãƒ¼ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

```bash
fastmcp install server.py
```

### 3. ç›´æ¥å®Ÿè¡Œï¼ˆé«˜åº¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ï¼‰

ã‚µãƒ¼ãƒãƒ¼ã‚’ç›´æ¥å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š

```python
if __name__ == "__main__":
    mcp.run(transport="stdio")  # ã¾ãŸã¯ "sse"
```

## å®Ÿè£…ä¾‹

### ã‚¨ã‚³ãƒ¼ã‚µãƒ¼ãƒãƒ¼

ãƒªã‚½ãƒ¼ã‚¹ã€ãƒ„ãƒ¼ãƒ«ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç¤ºã™ç°¡å˜ãªã‚µãƒ¼ãƒãƒ¼ï¼š

```python
from fastmcp import FastMCP

mcp = FastMCP("Echo")

@mcp.resource("echo://{message}")
def echo_resource(message: str) -> str:
    """ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚³ãƒ¼ã™ã‚‹"""
    return f"Resource echo: {message}"

@mcp.tool()
def echo_tool(message: str) -> str:
    """ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ã‚³ãƒ¼ã™ã‚‹"""
    return f"Tool echo: {message}"

@mcp.prompt()
def echo_prompt(message: str) -> str:
    """ã‚¨ã‚³ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹"""
    return f"ã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ã¦ãã ã•ã„: {message}"
```

### SQLiteã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±åˆã‚’ç¤ºã™ã‚ˆã‚Šè¤‡é›‘ãªä¾‹ï¼š

```python
from fastmcp import FastMCP
import sqlite3

mcp = FastMCP("SQLite Explorer")

@mcp.resource("schema://main")
def get_schema() -> str:
    """ãƒªã‚½ãƒ¼ã‚¹ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’æä¾›ã™ã‚‹"""
    conn = sqlite3.connect("database.db")
    schema = conn.execute(
        "SELECT sql FROM sqlite_master WHERE type='table'"
    ).fetchall()
    return "\n".join(sql[0] for sql in schema if sql[0])

@mcp.tool()
def query_data(sql: str) -> str:
    """SQLã‚¯ã‚¨ãƒªã‚’å®‰å…¨ã«å®Ÿè¡Œã™ã‚‹"""
    conn = sqlite3.connect("database.db")
    try:
        result = conn.execute(sql).fetchall()
        return "\n".join(str(row) for row in result)
    except Exception as e:
        return f"Error: {str(e)}"
```

## TypeScriptç‰ˆ FastMCP

Pythonç‰ˆã®FastMCPã«åŠ ãˆã¦ã€TypeScriptç‰ˆã®FastMCPã‚‚å­˜åœ¨ã—ã¾ã™ã€‚ã“ã‚Œã¯åŒæ§˜ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ãŒã€TypeScript/JavaScriptç’°å¢ƒå‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### ç‰¹å¾´

- ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ„ãƒ¼ãƒ«ã€ãƒªã‚½ãƒ¼ã‚¹ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå®šç¾©
- èªè¨¼
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- ç”»åƒã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- ãƒ­ã‚®ãƒ³ã‚°
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- SSEï¼ˆServer-Sent Eventsï¼‰
- CORSï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹ï¼‰
- é€²æ—é€šçŸ¥
- å‹ä»˜ãã‚µãƒ¼ãƒãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install fastmcp
```

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```typescript
import { FastMCP } from "fastmcp";
import { z } from "zod";

const server = new FastMCP({
  name: "My Server",
  version: "1.0.0",
});

server.addTool({
  name: "add",
  description: "Add two numbers",
  parameters: z.object({
    a: z.number(),
    b: z.number(),
  }),
  execute: async (args) => {
    return String(args.a + args.b);
  },
});

server.start({
  transportType: "stdio",
});
```

### ãƒ†ã‚¹ãƒˆæ–¹æ³•

```bash
npx fastmcp dev server.js
# ã¾ãŸã¯
npx fastmcp dev server.ts
```

## å‚è€ƒãƒªãƒ³ã‚¯

- [Python FastMCP GitHub](mdc:https:/github.com/jlowin/fastmcp)
- [TypeScript FastMCP GitHub](mdc:https:/github.com/punkpeye/fastmcp)
- [å…¬å¼MCP Python SDK](mdc:https:/github.com/modelcontextprotocol/python-sdk)
